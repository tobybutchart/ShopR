var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var b=0;return $jscomp.iteratorPrototype(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();var b=a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};
var Menu=function(a,b,c,d,e,g,f){this.mon=a;this.tue=b;this.wed=c;this.thu=d;this.fri=e;this.sat=g;this.sun=f},Item=function(a,b,c){this.item=a;this.checked=b;this.uuid=c},ShoppingList=function(a,b,c,d,e,g){var f=new Date;this.title=a;this.shop=b;this.menu=c;this.items=d;this.date=(new Date(f.getTime()-6E4*f.getTimezoneOffset())).toISOString();this.uuid=e;this.message=g?g:""},shoppingListsStr="shopping-lists",shoppingLists=getLists();displayLists();
function getLists(){var a=[];null!=localStorage.getItem(shoppingListsStr)&&(a=JSON.parse(localStorage.getItem(shoppingListsStr)));a.sort(sortListsByDate);return a}function sortListsByDate(a,b){return a.date<b.date?1:a.date>b.date?-1:0}function getListIndexByProp(a,b){for(var c=0;c<shoppingLists.length;c++)if(shoppingLists[c][a]==b)return c;return-1}function getListByProp(a,b){for(var c=0;c<shoppingLists.length;c++)if(shoppingLists[c][a]==b)return shoppingLists[c];return{}}
function addList(a,b){shoppingLists.unshift(a);var c=!0;if(void 0!=b||null!=b)c=b;saveLists(c);displayLists()}function updateList(a,b){var c=getListIndexByProp("uuid",b);-1<c?(shoppingLists[c]=a,saveLists(!0),displayLists()):showMsg("error","Cannot update:<br>"+b)}function saveLists(a){localStorage.setItem(shoppingListsStr,JSON.stringify(shoppingLists));a&&showMsg("success","Shopping lists saved")}
function saveList(a){var b=document.getElementById("inp-mon"),c=document.getElementById("inp-tue"),d=document.getElementById("inp-wed"),e=document.getElementById("inp-thu"),g=document.getElementById("inp-fri"),f=document.getElementById("inp-sat"),l=document.getElementById("inp-sun"),h=document.getElementById("inp-list-uuid"),k=""==h.value;k&&(h.value=createUUID());for(var m=document.getElementById("inp-list-title"),n=document.getElementById("inp-list-shop"),q=new Menu(b.value.toPascalCase(),c.value.toPascalCase(),
d.value.toPascalCase(),e.value.toPascalCase(),g.value.toPascalCase(),f.value.toPascalCase(),l.value.toPascalCase()),r=[],v=document.getElementById("table-list-items"),w=document.getElementById("table-list-items-body"),v=$jscomp.makeIterator(v.rows),t=v.next();!t.done;t=v.next())for(var t=$jscomp.makeIterator(t.value.cells),u=t.next();!u.done;u=t.next())for(var u=$jscomp.makeIterator(u.value.children),p=u.next();!p.done;p=u.next())if(p=p.value,"p"==p.nodeName.toLowerCase()){var x=p.dataset.checked&&
"false"!=p.dataset.checked?!0:!1,p=new Item(p.innerHTML.toPascalCase(),x,p.dataset.uuid);r.push(p)}if(0==r.length)return showMsg("warning","A shopping list must have at least one item!"),!1;a=new ShoppingList(m.value.toPascalCase(),n.value.toPascalCase(),q,r,h.value,a);k?addList(a):updateList(a,h.value);h.value="";m.value="";n.value="";b.value="";c.value="";d.value="";e.value="";g.value="";f.value="";l.value="";w.innerHTML="";return!0}
function deleteItemNode(a){var b=document.getElementById(a);b?(a=function(){b.remove();showMsg("success","List item deleted")},settings.confirmOnDelete?showMsg("confirm","Are you sure you want to delete this list item?",a,null):a()):showMsg("error","Cannot find: "+a)}function editItemNode(a,b){a&&"object"==typeof a&&(a.innerHTML=b,showMsg("success","List item updated"))}
function confirmEditItemNode(a){a=document.getElementById(a).firstChild.firstChild;showMsg("input","Edit list item",editItemNode,null,a.innerHTML,a)}
function isItemInTable(a){for(var b=document.getElementById("table-list-items"),b=$jscomp.makeIterator(b.rows),c=b.next();!c.done;c=b.next())for(var c=$jscomp.makeIterator(c.value.cells),d=c.next();!d.done;d=c.next())for(var d=$jscomp.makeIterator(d.value.children),e=d.next();!e.done;e=d.next())if(e=e.value,"p"==e.nodeName.toLowerCase()&&e.innerHTML.toLowerCase()==a.toLowerCase())return!0;return!1}
function addListItemInternal(a,b){var c=document.getElementById("table-list-items-body"),d=document.getElementById("inp-list-item"),e=document.createElement("tr"),g=document.createElement("td"),f=document.createElement("td"),l=document.createElement("p"),h=document.createElement("button"),k=document.createElement("button"),m=document.createElement("i"),n=document.createElement("i"),q=b?b.uuid:createUUID();e.id=q;l.innerHTML=d.value.toPascalCase();l.dataset.uuid=q;l.dataset.checked=b?b.checked:!1;
h.classList.add("float-right");h.onclick=function(){deleteItemNode(q)};k.classList.add("float-right");k.onclick=function(){confirmEditItemNode(q)};n.classList.add("material-icons");n.innerHTML="edit";m.classList.add("material-icons");m.innerHTML="delete";h.appendChild(m);k.appendChild(n);f.appendChild(h);f.appendChild(k);g.appendChild(l);e.appendChild(g);e.appendChild(f);c.insertBefore(e,c.firstChild);if(c=document.getElementById("btn-accordion-add-list").nextElementSibling)c.style.maxHeight=a?c.scrollHeight+
"px":null;d.value="";d.focus();return!0}function addListItem(a,b){var c=document.getElementById("inp-list-item");if(!c.value)return showMsg("warning","Enter an item!"),c.focus(),!1;!b&&isItemInTable(c.value)?showMsg("confirm",c.value+" has already been added. Are you sure you want to add it again?",function(){addListItemInternal(a,b)},function(){c.value="";c.focus()}):addListItemInternal(a,b)}
function toggleListItem(a,b){var c=document.getElementById(b);if(c){var d=c.parentElement.parentElement;a.checked?(c.style.textDecoration="line-through",settings.hideOnTick&&(d.style.display="none",d.remove())):(c.style.textDecoration="none",settings.hideOnTick&&(d.style.display="table-row"));for(var e,c=$jscomp.makeIterator(shoppingLists),d=c.next();!d.done;d=c.next())for(var g=d.value,f=$jscomp.makeIterator(g.items),d=f.next();!d.done;d=f.next())if(d=d.value,d.uuid==b){e=g;d.checked=a.checked;break}c=
0;e=$jscomp.makeIterator(e.items);for(d=e.next();!d.done;d=e.next())d.value.checked||c++;document.getElementById("span-items-remaining").innerHTML=c;saveLists(!1)}}function getTitle(a){return a.title?a.title:a.date}
function editList(a){var b=getListByProp("uuid",a);if(b=={})return showMsg("error","Cannot find:</br>"+a),!1;var c=document.getElementById("inp-list-uuid"),d=document.getElementById("inp-list-title"),e=document.getElementById("inp-list-shop"),g=document.getElementById("inp-mon"),f=document.getElementById("inp-tue"),l=document.getElementById("inp-wed"),h=document.getElementById("inp-thu"),k=document.getElementById("inp-fri"),m=document.getElementById("inp-sat"),n=document.getElementById("inp-sun");
a=document.getElementById("inp-list-item");c.value=b.uuid;d.value=b.title;e.value=b.shop;g.value=b.menu.mon;f.value=b.menu.tue;l.value=b.menu.wed;h.value=b.menu.thu;k.value=b.menu.fri;m.value=b.menu.sat;n.value=b.menu.sun;document.getElementById("table-list-items-body").innerHTML="";b=$jscomp.makeIterator(b.items);for(c=b.next();!c.done;c=b.next())c=c.value,a.value=c.item,addListItem(!1,c);showPage(event,"Add");return!0}
function confirmDeleteList(a){var b=function(){deleteList(a)};settings.confirmOnDelete?showMsg("confirm","Are you sure you want to delete this list?",b,null):b()}function deleteList(a){a=getListIndexByProp("uuid",a);-1<a?(shoppingLists.splice(a,1),saveLists(!1),displayLists(),showMsg("success","List deleted")):showMsg("error","Cannot delete: "+a)}
function displayLists(){var a=document.getElementById("table-lists-open");a.innerHTML="";for(var b=0,c={},d=$jscomp.makeIterator(shoppingLists),e=d.next();!e.done;c={list:c.list},e=d.next()){c.list=e.value;var e=document.createElement("tr"),g=document.createElement("tr"),f=document.createElement("td"),l=document.createElement("p"),h=document.createElement("td"),k=document.createElement("td"),m=document.createElement("button"),n=document.createElement("button"),q=document.createElement("button"),r=
document.createElement("button");b%2&&(e.style.backgroundColor="#EAF3F5",g.style.backgroundColor="#EAF3F5");l.innerHTML=getTitle(c.list);f.appendChild(l);f.rowSpan=2;e.appendChild(f);a.appendChild(e);h.style.width="35px";m.innerHTML="<i class='material-icons'>open_in_new</i>";m.onclick=function(a){return function(){displayInfo(a.list);displayMenu(a.list.menu);displayList(a.list);showPage(event,"View")}}(c);n.innerHTML="<i class='material-icons'>send</i>";n.onclick=function(a){return function(){document.getElementById("btn-modal-send").dataset.id=
a.list.uuid;showModal("send-modal")}}(c);h.appendChild(m);h.appendChild(n);g.appendChild(h);k.style.width="35px";q.innerHTML="<i class='material-icons'>edit</i>";q.onclick=function(a){return function(){editList(a.list.uuid)}}(c);r.innerHTML="<i class='material-icons'>delete</i>";r.onclick=function(a){return function(){confirmDeleteList(a.list.uuid)}}(c);k.appendChild(q);k.appendChild(r);g.appendChild(k);a.appendChild(g);b++}0==b&&(a.innerHTML="<tr><td>No shopping lists to display....</td></tr>")}
function displayInfo(a){var b=document.getElementById("table-list-info-view");b.innerHTML="";var c=getTitle(a);a=a.shop?a.shop:"---";b.innerHTML=b.innerHTML+"<tr><td><p>Title</p></td><td><p>"+c+"</p></td></tr>";b.innerHTML=b.innerHTML+"<tr><td><p>Shop</p></td><td><p>"+a+"</p></td></tr>"}
function displayMenu(a){function b(b){var c=document.createElement("tr"),d=a[b.toLowerCase()]?a[b.toLowerCase()]:"---";c.innerHTML="<td><p>"+b+"</p></td><td><p>"+d+"</p></td>";return c}var c=document.getElementById("table-list-menu-view");c.innerHTML="";c.appendChild(b("Mon"));c.appendChild(b("Tue"));c.appendChild(b("Wed"));c.appendChild(b("Thu"));c.appendChild(b("Fri"));c.appendChild(b("Sat"));c.appendChild(b("Sun"))}
function displayList(a,b){var c=document.getElementById("table-list-items-view");c.innerHTML="";var d=0,e;b||(e=a.items);var g={};e=$jscomp.makeIterator(e);for(var f=e.next();!f.done;g={uuid:g.uuid},f=e.next()){f=f.value;g.uuid=f.uuid;var l=document.createElement("tr"),h=document.createElement("input"),k=document.createElement("td"),m=document.createElement("td");h.type="checkbox";h.classList.add("float-right");h.checked=f.checked;h.onclick=function(a){return function(){toggleListItem(this,a.uuid)}}(g);
k.innerHTML="<p id='"+g.uuid+"'>"+f.item+"</p>";m.appendChild(h);l.appendChild(k);l.appendChild(m);c.appendChild(l);toggleListItem(h,g.uuid);d++}document.getElementById("span-total-items").innerHTML=d}
function addAndDisplayList(a){showMsg("confirm",(a.message?"A list has been received with the following message:<br>"+a.message:"A list has been received")+"<br>Do you want to view the list now?",function(){addList(a,!1);displayInfo(a);displayMenu(a.menu);displayList(a);showPage(event,"View");hideModal("settings-modal");document.getElementById("main-header").style.display="block";closeNav()},function(){addList(a,!1)})};
